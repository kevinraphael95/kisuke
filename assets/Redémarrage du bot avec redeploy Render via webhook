

---

## üîπ Red√©marrage du bot avec redeploy Render via webhook

### 1Ô∏è‚É£ Cr√©er un webhook Render

1. Connecte-toi √† ton compte Render.
2. Va dans ton service bot.
3. Clique sur **Settings ‚Üí Manual Deploy ‚Üí Deploy Hooks**.
4. Cr√©e un nouveau Deploy Hook, par exemple `re-deploy-hook`.
5. Copie l‚ÄôURL du hook (ressemble √† `https://api.render.com/deploy/srv-xxxxxx`).
6. Teste le hook avec un POST depuis ton navigateur ou Postman pour t‚Äôassurer qu‚Äôil fonctionne.

---

### 2Ô∏è‚É£ Ajouter le webhook comme variable d‚Äôenvironnement

1. Dans Render, va dans **Environment ‚Üí Environment Variables**.
2. Ajoute une variable :

```
RENDER_REDEPLOY_WEBHOOK=https://api.render.com/deploy/srv-xxxxxx
```

3. Pour v√©rifier l‚Äô√©tat du service apr√®s redeploy, ajoute aussi :

```
RENDER_SERVICE_API=https://api.render.com/services/srv-xxxxxx
```

4. Sauvegarde et redeploy ton bot une derni√®re fois pour que les variables soient prises en compte.

---

### 3Ô∏è‚É£ Modifier le bot pour utiliser le webhook

Dans la commande `!re` du bot :

```python
self.render_webhook = os.getenv("RENDER_REDEPLOY_WEBHOOK")
self.render_service_api = os.getenv("RENDER_SERVICE_API")
```

Render injectera automatiquement ces variables d‚Äôenvironnement.

Quand `!re` est ex√©cut√© :

* Le bot pr√©vient les membres que le redeploy est imminent ‚úÖ
* Envoie la requ√™te au webhook Render ‚úÖ
* Attends que le service soit de nouveau en ligne et notifie ‚úÖ

---

### 4Ô∏è‚É£ Test

1. Envoie `!re` dans Discord.
2. Le bot devrait :

   * Pr√©venir le serveur que le bot va red√©marrer.
   * Envoyer la requ√™te au webhook Render.
   * Notifier automatiquement que le redeploy est termin√©.
3. Dans Render, tu verras le redeploy se lancer et se terminer automatiquement.

---
