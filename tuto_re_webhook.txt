ğŸ“Œ **RedÃ©marrage du bot avec redeploy Render via webhook** ğŸ”ƒ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
**1ï¸âƒ£ CrÃ©er un webhook Render**

â€¢ Connecte-toi Ã  ton compte Render
â€¢ Va dans ton service bot
â€¢ Clique sur **Settings â†’ Build & Deploy â†’ Deploy Hooks**
â€¢ Copie lâ€™URL du deploy hook :
`https://api.render.com/deploy/srv-xxxxxx`
â€¢ Optionnel : teste le hook avec un POST depuis ton navigateur ou Postman

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
**2ï¸âƒ£ Ajouter les variables dâ€™environnement**

â€¢ Dans Render, va dans **Environment â†’ Environment Variables**
â€¢ Ajoute une variable pour le webhook :
  RENDER_REDEPLOY_WEBHOOK=https://api.render.com/deploy/srv-xxxxxx
â€¢ Pour vÃ©rifier que le service est de nouveau actif aprÃ¨s le redeploy, ajoute aussi :
  RENDER_SERVICE_API=https://api.render.com/v1/services/srv-xxxxxx

> ğŸ”¹ **Comment trouver lâ€™URL `RENDER_SERVICE_API`**
>
> * Va dans ton service sur Render â†’ **Settings** ou **Service Details**
> * RepÃ¨re lâ€™ID du service (`srv-xxxxxx`)
> * Combine-le avec `https://api.render.com/v1/services/` â†’ tu obtiens lâ€™URL complÃ¨te

â€¢ Sauvegarde et redeploy ton bot une derniÃ¨re fois pour que les variables soient prises en compte

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
**3ï¸âƒ£ Modifier le bot pour utiliser le webhook**

Dans la commande `!re` du bot, ajoute :

```python
self.render_webhook = os.getenv("RENDER_REDEPLOY_WEBHOOK")
self.render_service_api = os.getenv("RENDER_SERVICE_API")
```

Quand `!re` est exÃ©cutÃ© :
âœ… Le bot prÃ©vient les membres que le redeploy est imminent
âœ… Envoie la requÃªte au webhook Render
âœ… Attend que le service soit de nouveau en ligne et notifie

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
**4ï¸âƒ£ Test**

1. Envoie `!re` dans Discord
2. Le bot devrait :

   * ğŸ”” PrÃ©venir le serveur que le bot va redÃ©marrer
   * ğŸ“¤ Envoyer la requÃªte au webhook Render
   * âœ… VÃ©rifier que le service est de nouveau actif et notifier la fin du redeploy
3. Dans Render, tu verras le redeploy se lancer et se terminer automatiquement

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
