# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“Œ kluboutside.py â€” Commande !kluboutside / !ko
# Objectif : Afficher une question Klub Outside avec numÃ©ro
# CatÃ©gorie : KlubOutside
# AccÃ¨s : Public
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ğŸ“¦ Imports nÃ©cessaires
import discord
from discord.ext import commands
import json
import os

# ğŸ“‚ Chargement des donnÃ©es Klub Outside
KO_DATA_PATH = os.path.join("data", "ko.json")
KO_IMAGE_DIR = os.path.join("data", "koimages")

def load_ko_data():
    with open(KO_DATA_PATH, "r", encoding="utf-8") as f:
        return json.load(f)

# ğŸ§  Cog principal
class KlubOutside(commands.Cog):
    """
    Commande !kluboutside â€” Affiche une question Klub Outside par numÃ©ro
    """
    def __init__(self, bot):
        self.bot = bot

    @commands.command(
        name="kluboutside",
        aliases=["ko"],
        help="ğŸ““ Affiche une question Klub Outside par son numÃ©ro.",
        description="Utilise : `!ko <numÃ©ro>`"
    )
    async def kluboutside(self, ctx: commands.Context, numero: int):
        try:
            data = load_ko_data()
            questions = data.get("Questions", {})

            entry = questions.get(str(numero))
            if not entry:
                await ctx.send(f"âŒ Aucune question trouvÃ©e pour le numÃ©ro {numero}.")
                return

            date = entry.get("date", "Inconnue")
            question = entry.get("question", "*Non prÃ©cisÃ©e*")
            reponse = entry.get("rÃ©ponse", "*Aucune rÃ©ponse*")

            embed = discord.Embed(
                title=f"ğŸ“˜ Question Klub Outside nÂ°{numero}",
                color=discord.Color.green()
            )
            embed.add_field(name="ğŸ“… Date", value=date, inline=False)
            embed.add_field(name="â“ Question", value=question, inline=False)
            embed.add_field(name="ğŸ’¬ RÃ©ponse", value=reponse, inline=False)

            # ğŸ“· VÃ©rifie si une image existe pour cette question
            for ext in ["png", "jpg", "jpeg", "webp"]:
                image_path = os.path.join(KO_IMAGE_DIR, f"ko{numero}.{ext}")
                if os.path.exists(image_path):
                    file = discord.File(image_path, filename=f"ko{numero}.{ext}")
                    embed.set_image(url=f"attachment://ko{numero}.{ext}")
                    await ctx.send(embed=embed, file=file)
                    return

            await ctx.send(embed=embed)

        except FileNotFoundError:
            await ctx.send("âŒ Le fichier `ko.json` est introuvable.")
        except Exception as e:
            await ctx.send(f"âš ï¸ Erreur : `{e}`")

# ğŸ”Œ Setup du cog
async def setup(bot: commands.Bot):
    cog = KlubOutside(bot)
    for command in cog.get_commands():
        if not hasattr(command, "category"):
            command.category = "KlubOutside"
    await bot.
add_cog(cog)
