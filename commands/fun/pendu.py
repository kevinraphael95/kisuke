# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“ pendu
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“¦ Cog principal â€” Commande !pendu
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import discord
from discord.ext import commands
import asyncio
from random_words_generator.words import generate_random_words

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ”§ COG : PenduCommand
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
class PenduCommand(commands.Cog):
    def __init__(self, bot: commands.Bot):
        self.bot = bot  # ğŸ”Œ Stocke l'instance du bot

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ğŸ”¹ COMMANDE : !pendu
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    @commands.command(
        name="pendu",
        aliases=["hangman"],
        help="ğŸ® Lance une partie de pendu avec un mot franÃ§ais alÃ©atoire."
    )
    @commands.cooldown(rate=1, per=5, type=commands.BucketType.user)  # ğŸ§Š Anti-spam
    async def pendu(self, ctx: commands.Context):
        # ğŸ¯ GÃ©nÃ¨re un mot franÃ§ais alÃ©atoire
        try:
            mot = generate_random_words(1)[0].lower()
        except Exception as e:
            await ctx.send("âŒ Impossible de gÃ©nÃ©rer un mot alÃ©atoire.")
            return

        lettres_trouvees = set()
        lettres_ratees = set()
        tentatives_restantes = 6

        def afficher_mot():
            return ' '.join([lettre if lettre in lettres_trouvees else '_' for lettre in mot])

        await ctx.send(f"ğŸ® **Jeu du Pendu**\nMot Ã  deviner : `{afficher_mot()}`\nTentatives restantes : {tentatives_restantes}")

        def check(message):
            return (
                message.author == ctx.author
                and message.channel == ctx.channel
                and len(message.content) == 1
                and message.content.isalpha()
            )

        while tentatives_restantes > 0:
            try:
                msg = await self.bot.wait_for("message", check=check, timeout=60.0)
                lettre = msg.content.lower()

                if lettre in lettres_trouvees or lettre in lettres_ratees:
                    await ctx.send("âš ï¸ Lettre dÃ©jÃ  proposÃ©e.")
                    continue

                if lettre in mot:
                    lettres_trouvees.add(lettre)
                    await ctx.send(f"âœ… Bien jouÃ© ! `{afficher_mot()}`")
                else:
                    lettres_ratees.add(lettre)
                    tentatives_restantes -= 1
                    await ctx.send(f"âŒ Mauvais choix. Tentatives restantes : {tentatives_restantes}\nMot : `{afficher_mot()}`")

                if all(l in lettres_trouvees for l in mot):
                    await ctx.send(f"ğŸ‰ FÃ©licitations ! Vous avez devinÃ© le mot : **{mot}**")
                    return

            except asyncio.TimeoutError:
                await ctx.send("â° Temps Ã©coulÃ© !")
                return

        await ctx.send(f"ğŸ’€ Partie terminÃ©e. Le mot Ã©tait : **{mot}**")

    # ğŸ·ï¸ CatÃ©gorisation pour affichage personnalisÃ© dans !help
    def cog_load(self):
        self.pendu.category = "Jeux"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ”Œ SETUP POUR CHARGEMENT AUTOMATIQUE DU COG
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async def setup(bot: commands.Bot):
    await bot.add_cog(PenduCommand(bot))
    print("âœ… Cog chargÃ© : PenduCommand (catÃ©gorie = Jeux)")
